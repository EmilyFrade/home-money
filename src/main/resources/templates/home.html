<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Home Money</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@700&display=swap');

        body {
            background-color: #f8f9fa;
        }

        .typing-effect {
            font-family: 'Poppins', sans-serif;
            font-size: 2rem;
            font-weight: bold;
            color: #145A32;
            white-space: nowrap;
            overflow: hidden;
            border-right: 3px solid #145A32;
            display: inline-block;
        }

        .residence-box {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            max-width: 600px;
            margin: 10px 0;
        }

        .btn-wide {
            width: 100%;
            max-width: 300px;
        }

        .container-custom {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-top: 30px;
        }

        .welcome-section {
            flex: 1;
            padding-left: 20px;
        }

        .residence-section {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            padding-right: 20px;
        }

        .residence-box-wrapper {
            width: 100%;
            max-width: 400px;
        }
    </style>
</head>
<body>

<div class="container-custom">
    <div class="welcome-section">
        <h1 class="typing-effect" id="typing-text"></h1>
    </div>

    <div class="residence-section">
        <div class="residence-box-wrapper">
            <div th:if="${noResidence}" class="residence-box text-center">
                <p class="fw-semibold">Você está sem lar :/</p>
                <a href="/residence/create" class="btn btn-success btn-wide">Criar uma nova residência</a>
                <p class="pt-3 fw-semibold">Ou</p>

                <form th:action="@{/residence/join}" method="post" class="d-flex flex-column align-items-center">
                    <input type="text" name="inviteCode" class="form-control mb-3 text-center" placeholder="Código de Convite" required style="max-width: 300px;" />
                    <button type="submit" class="btn btn-secondary btn-wide">Entrar com Código de Convite</button>
                </form>

                <div th:if="${invalidInviteCode}" class="mt-3 alert alert-danger" style="max-width: 300px; margin: auto;">
                    O código de convite informado é inválido. Por favor, tente novamente.
                </div>
            </div>
        </div>

        <div class="residence-box-wrapper">
            <div th:if="${user}" class="residence-box text-center">
                <h3 class="text-success fw-bold">Você</h3>
                <p><strong>Nome:</strong> <span th:text="${user.name}"></span></p>
                <p><strong>E-mail:</strong> <span th:text="${user.username}"></span></p>
                <a th:href="@{/user}" class="btn btn-success btn-wide mt-3 text-white">Mais Informações</a>
            </div>
        </div>

        <div class="residence-box-wrapper">
            <div th:if="${residence}" class="residence-box text-center">
                <h3 class="text-success fw-bold">Sua Residência</h3>
                <p><strong>Nome:</strong> <span th:text="${residence.name}"></span></p>
                <p><strong>Endereço:</strong> <span th:text="${residence.street + ', ' + residence.neighborhood + ', ' + residence.city + ', ' + residence.state}"></span></p>
                <p><strong>Valor do Aluguel:</strong> R$ <span th:text="${#numbers.formatDecimal(residence.rentValue, 1, 'POINT', 2, 'COMMA')}"></span></p>
                <a th:href="@{/residence/details}" class="btn btn-success btn-wide mt-3 text-white">Mais Informações</a>
            </div>
        </div>

        <div class="residence-box-wrapper">
            <div class="residence-box text-center">
                <h3 class="text-success fw-bold">Suas Despesas</h3>
                <p>Visualize suas despesas</p>
                <p>Crie novas despesas</p>
                <a th:href="@{/expense}" class="btn btn-success btn-wide mt-3 text-white">Mais Informações</a>
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const text = "Bem-vindo ao Home Money!";
        let index = 0;
        const typingElement = document.getElementById("typing-text");

        function typeEffect() {
            if (index < text.length) {
                typingElement.innerHTML += text.charAt(index);
                index++;
                setTimeout(typeEffect, 100);
            } else {
                typingElement.style.borderRight = "none";
            }
        }

        typeEffect();
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.bundle.min.js"></script>

</body>
</html>
